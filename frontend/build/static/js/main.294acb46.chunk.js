(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,a){},64:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(19),s=a.n(c),r=a(6),i=a(3),o=a(2),l=a.n(o),u=a(8),j=a(10),p=a.n(j),b="USER_LOADING",d="LOGIN_USER",O="REGISTER_USER",h="LOGOUT_USER",m="GET_AUTH_USER",f="AUTH_ERRORS",x=function(){return function(e){e({type:b})}},g=(a(63),a(9)),v=(a(64),"GET_POSTS_LOAD "),N="GET_POSTS_SUCCESS",y="GET_POSTS_FAIL",S="GET_POST_LOAD",w="GET_POST_SUCCESS",k="GET_POST_FAIL",I="GET_POST_RESET",E="ADD_POST_LOAD",T="ADD_POST_SUCCESS",_="ADD_POST_FAIL",L=function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:v}),e.prev=1,e.next=4,p.a.get("/api/posts");case 4:a=e.sent,t({type:N,payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.dir(e.t0),t({type:y,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={headers:{"x-auth-token":localStorage.getItem("token")}},p.a.delete("/api/posts/".concat(e),n).then((function(){return a(L())})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e,t){return function(){var a=Object(u.a)(l.a.mark((function a(n){var c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c={headers:{"x-auth-token":localStorage.getItem("token")}},a.next=4,p.a.put("/api/posts/".concat(e),t,c);case 4:n(L()),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0),n({type:k});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(u.a)(l.a.mark((function t(a){var n,c,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:E}),t.prev=1,t.next=4,p.a.post("/api/posts",e);case 4:n=t.sent,a({type:T,payload:n.data}),t.next=16;break;case 8:if(t.prev=8,t.t0=t.catch(1),console.dir(t.t0),c=t.t0.response.data,s=c.errors,r=c.msg,Array.isArray(s)&&s.forEach((function(e){return alert(e.msg)})),!r){t.next=15;break}return t.abrupt("return",alert(r));case 15:a({type:_});case 16:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},D=a(7),C=a(0);function U(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(g.a)(s,2),o=r[0],j=r[1],b=Object(n.useState)(null),d=Object(g.a)(b,2),O=d[0],h=d[1],m=Object(i.c)((function(e){return e.authReducer.user})),f=Object(i.b)(),x=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={name:m.name,title:a,desc:o},!O){e.next=15;break}return c=new FormData,s=Date.now()+O.name,c.append("name",s),c.append("file",O),n.photo=s,e.prev=8,e.next=11,p.a.post("/uploads",c);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:f(P(n));case 16:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}();return!0===!m?Object(C.jsx)("div",{children:Object(C.jsxs)("h1",{style:{color:"red"},children:[Object(C.jsx)("center",{children:" Create an account to create a post"})," "]})}):Object(C.jsxs)("div",{className:"write",children:[O&&Object(C.jsx)("img",{className:"writeImg",src:URL.createObjectURL(O),alt:""}),Object(C.jsxs)("form",{className:"writeForm",onSubmit:x,children:[Object(C.jsxs)("div",{className:"writeFormGroup",children:[Object(C.jsx)("label",{htmlFor:"fileInput",children:Object(C.jsx)("i",{className:"writeIcon fas fa-plus"})}),Object(C.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return h(e.target.files[0])}}),Object(C.jsx)("input",{type:"text",placeholder:"Title",className:"writeInput",autoFocus:!0,onChange:function(e){return c(e.target.value)}})]}),Object(C.jsx)("div",{className:"writeFormGroup",children:Object(C.jsx)("textarea",{placeholder:"Tell your story...",type:"text",className:"writeInput writeText",onChange:function(e){return j(e.target.value)}})}),Object(C.jsx)(D.b,{to:"/",children:Object(C.jsx)("button",{className:"writeSubmit",type:"submit",children:"Publish"})})]})]})}a(68);var G=function(){var e=Object(i.b)(),t=Object(r.g)(),a=Object(n.useState)(""),c=Object(g.a)(a,2),s=c[0],o=c[1],j=Object(n.useState)(""),b=Object(g.a)(j,2),O=b[0],h=b[1];return Object(C.jsxs)("div",{className:"login",children:[Object(C.jsx)("span",{className:"loginTitle",children:"Register"}),Object(C.jsxs)("form",{className:"loginForm",onSubmit:function(){var a;e((a={email:s,password:O},function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x()),e.prev=1,e.next=4,p.a.post("/api/auth/login",a);case 4:n=e.sent,t({type:d,payload:n.data}),e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(1),console.dir(e.t0),c=e.t0.response.data,s=c.errors,r=c.msg,Array.isArray(s)&&s.forEach((function(e){return alert(e.msg)})),!r){e.next=15;break}return e.abrupt("return",alert(r));case 15:t({type:f});case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),t.push("/"),o(""),h("")},children:[Object(C.jsx)("label",{children:"Email address"}),Object(C.jsx)("input",{className:"loginInput",name:"email",type:"email",placeholder:"Enter email",value:s,onChange:function(e){return o(e.target.value)}}),Object(C.jsx)("label",{children:"Password"}),Object(C.jsx)("input",{className:"loginInput",name:"password",type:"password",placeholder:"Password",value:O,onChange:function(e){return h(e.target.value)}}),Object(C.jsx)("button",{className:"loginButton",type:"submit",children:"Login"})]})]})},F=(a(69),function(){var e=Object(i.b)(),t=Object(r.g)(),a=Object(n.useState)(""),c=Object(g.a)(a,2),s=c[0],o=c[1],j=Object(n.useState)(""),b=Object(g.a)(j,2),d=b[0],h=b[1],m=Object(n.useState)(""),v=Object(g.a)(m,2),N=v[0],y=v[1],S=Object(n.useState)(""),w=Object(g.a)(S,2),k=w[0],I=w[1];return Object(C.jsxs)("div",{className:"register",children:[Object(C.jsx)("span",{className:"registerTitle",children:"Register"}),Object(C.jsxs)("form",{className:"registerForm",onSubmit:function(){var a;e((a={name:s,lastName:d,email:N,password:k},function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x()),e.prev=1,e.next=4,p.a.post("/api/auth/register",a);case 4:n=e.sent,t({type:O,payload:n.data}),e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(1),console.dir(e.t0),c=e.t0.response.data,s=c.errors,r=c.msg,Array.isArray(s)&&s.forEach((function(e){return alert(e.msg)})),!r){e.next=15;break}return e.abrupt("return",alert(r));case 15:t({type:f});case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),t.push("/"),o(""),h(""),y(""),I("")},children:[Object(C.jsx)("label",{children:"First Name "}),Object(C.jsx)("input",{className:"registerInput",name:"email",type:"text",placeholder:"Enter first name",value:s,onChange:function(e){return o(e.target.value)}}),Object(C.jsx)("label",{children:"Last Name"}),Object(C.jsx)("input",{className:"registerInput",name:"email",type:"text",placeholder:"Enter last name",value:d,onChange:function(e){return h(e.target.value)}}),Object(C.jsx)("label",{children:"Email address"}),Object(C.jsx)("input",{className:"registerInput",name:"email",type:"email",placeholder:"Enter email",value:N,onChange:function(e){return y(e.target.value)}}),Object(C.jsx)("label",{children:"Password"}),Object(C.jsx)("input",{className:"registerInput",name:"password",type:"password",placeholder:"Password",value:k,onChange:function(e){return I(e.target.value)}}),Object(C.jsx)("button",{className:"registerButton",type:"submit",children:"Login"})]})]})});a(70);function B(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.authReducer.isAuth})),a=Object(i.c)((function(e){return e.authReducer.user}));return Object(C.jsxs)("div",{className:"top",children:[Object(C.jsxs)("div",{className:"topLeft",children:[Object(C.jsx)("i",{className:"topIcon fab fa-facebook-square"}),Object(C.jsx)("i",{className:"topIcon fab fa-twitter-square"}),Object(C.jsx)("i",{className:"topIcon fab fa-pinterest-square"}),Object(C.jsx)("i",{className:"topIcon fab fa-instagram-square"})]}),Object(C.jsx)("div",{className:"topCenter",children:Object(C.jsxs)("ul",{className:"topList",children:[Object(C.jsx)("li",{className:"topListItem",children:Object(C.jsx)(D.b,{className:"link",to:"/",children:"HOME"})}),Object(C.jsx)("li",{className:"topListItem",children:Object(C.jsx)(D.b,{className:"link",to:"/",children:"ABOUT"})}),Object(C.jsx)("li",{className:"topListItem",children:Object(C.jsx)(D.b,{className:"link",to:"/",children:"CONTACT"})}),Object(C.jsx)("li",{className:"topListItem",children:Object(C.jsx)(D.b,{className:"link",to:"/write",children:"WRITE"})}),Object(C.jsx)("li",{className:"topListItem",onClick:function(){e((function(e){e({type:h})}))},children:t&&"LOGOUT"})]})}),Object(C.jsxs)("div",{className:"topRight",children:[t?Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{children:Object(C.jsx)("span",{style:{marginRight:"2rem"},children:Object(C.jsxs)("strong",{children:[Object(C.jsx)("span",{style:{marginRight:"1rem"},children:"Welcome"}),a.name]})})})}):Object(C.jsxs)("ul",{className:"topList",children:[Object(C.jsx)("li",{className:"topListItem",children:Object(C.jsx)(D.b,{className:"link",to:"/login",children:"LOGIN"})}),Object(C.jsx)("li",{className:"topListItem",children:Object(C.jsx)(D.b,{className:"link",to:"/register",children:"REGISTER"})})]}),Object(C.jsx)("i",{className:"topSearchIcon fas fa-search"})]})]})}a(71);function q(){return Object(C.jsxs)("div",{className:"header",children:[Object(C.jsxs)("div",{className:"headerTitles",children:[Object(C.jsx)("span",{className:"headerTitleSm",children:"Soulayma Bouchiba"}),Object(C.jsx)("span",{className:"headerTitleLg",children:"Blog"})]}),Object(C.jsx)("img",{className:"headerImg",src:"https://images.pexels.com/photos/1167355/pexels-photo-1167355.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",alt:""})]})}a(72);function X(e){var t=e.post,a=Object(i.b)();return Object(C.jsxs)("div",{className:"post",children:[t.photo&&Object(C.jsx)("img",{className:"postImg",src:"/uploads/".concat(t.photo),alt:t.title}),Object(C.jsxs)("div",{className:"postInfo",children:[Object(C.jsx)(D.b,{to:"/post/".concat(t._id),className:"link",children:Object(C.jsx)("span",{className:"postTitle",onClick:function(){return a((e=t._id,function(){var t=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:S}),t.prev=1,t.next=4,p.a.get("/api/posts/".concat(e));case 4:n=t.sent,a({type:w,payload:n.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),a({type:k,payload:t.t0.response.data.msg});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:t.title})}),Object(C.jsx)("hr",{}),Object(C.jsx)("span",{className:"postDate",children:new Date(t.createdAt).toDateString()})]}),Object(C.jsx)("p",{className:"postDesc",children:t.desc})]})}a(73);function H(e){var t=e.posts;return Object(C.jsx)("div",{className:"posts",children:t.map((function(e){return Object(C.jsx)(X,{post:e})}))})}a(74);function W(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.postReducer.posts}));return Object(n.useEffect)((function(){e(L())}),[e]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(q,{}),Object(C.jsx)("div",{className:"home",children:Object(C.jsx)(H,{posts:t})})]})}var J=function(){var e=Object(i.c)((function(e){return e.authReducer.user}));return Object(C.jsx)("div",{children:e?Object(C.jsxs)("div",{children:[Object(C.jsxs)("h2",{children:[" ",e.name]}),Object(C.jsxs)("h2",{children:[" ",e.lastName]}),Object(C.jsxs)("h2",{children:[" ",e.email]})]}):Object(C.jsx)("h1",{children:"spinner...."})})},V=a(5),M=a(35),z=["component"],K=function(e){var t=e.component,a=Object(M.a)(e,z);return!0===Object(i.c)((function(e){return e.authReducer.isAuth}))?Object(C.jsx)(r.b,Object(V.a)({component:t},a)):Object(C.jsx)(r.a,{to:"Login"})};a(75);function Q(e){var t=e.match,a=Object(i.c)((function(e){return e.postReducer.post})),c=t.params.id,s=Object(i.b)(),o=Object(r.g)(),j=Object(i.c)((function(e){return e.authReducer.user})),p=Object(n.useState)(""),b=Object(g.a)(p,2),d=b[0],O=b[1],h=Object(n.useState)(""),m=Object(g.a)(h,2),f=m[0],x=m[1],v=Object(n.useState)(""),N=Object(g.a)(v,2),y=N[0],S=N[1],w=Object(n.useState)(!1),k=Object(g.a)(w,2),I=k[0],E=k[1];Object(n.useEffect)((function(){I&&(O(a.title),x(a.desc),S(a.name))}),[a,I]);var T=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(R(c)),o.push("/");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(A(a._id,{title:d,desc:f,name:y})),E(!1),o.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"singlePost",children:Object(C.jsxs)("div",{className:"singlePostWrapper",children:[a.photo&&Object(C.jsx)("img",{src:"/uploads/".concat(a.photo),alt:"",className:"singlePostImg"}),Object(C.jsx)("input",{type:"text",value:d,className:"singlePostTitleInput",autoFocus:!0,onChange:function(e){return O(e.target.value)}}),Object(C.jsxs)("h1",{className:"singlePostTitle",children:[d,a.name===(null===j||void 0===j?void 0:j.name)&&Object(C.jsxs)("div",{className:"singlePostEdit",children:[Object(C.jsx)("i",{className:"singlePostIcon far fa-edit",onClick:function(){return E(!0)}}),Object(C.jsx)("i",{className:"singlePostIcon far fa-trash-alt",onClick:T})]})]}),Object(C.jsxs)("div",{className:"singlePostInfo",children:[Object(C.jsxs)("span",{className:"singlePostAuthor",children:["Author:",Object(C.jsx)(D.b,{to:"/?user=".concat(a.name),className:"link",children:Object(C.jsxs)("b",{children:[" ",a.name]})})]}),Object(C.jsx)("span",{className:"singlePostDate",children:new Date(a.createdAt).toDateString()}),Object(C.jsx)("p",{className:"singlePostDesc",children:a.desc})]}),I?Object(C.jsx)("textarea",{className:"singlePostDescInput",value:f,onChange:function(e){return x(e.target.value)}}):Object(C.jsx)("p",{className:"singlePostDesc",children:f}),I&&Object(C.jsx)("button",{className:"singlePostButton",onClick:_,children:"Update"})]})})}var Y=function(){var e=Object(i.b)(),t=function(){return e(function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x()),e.prev=1,a={headers:{"x-auth-token":localStorage.getItem("token")}},e.next=5,p.a.get("/api/auth/user",a);case 5:n=e.sent,t({type:m,payload:n.data}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:f});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())};return Object(n.useEffect)((function(){t()}),[]),Object(C.jsxs)("div",{children:[Object(C.jsx)(B,{}),Object(C.jsxs)(r.d,{children:[Object(C.jsx)(r.b,{exact:!0,path:"/",component:W}),Object(C.jsx)(K,{path:"/dashboard",component:J}),Object(C.jsx)(r.b,{path:"/register",component:F}),Object(C.jsx)(r.b,{path:"/login",component:G}),Object(C.jsx)(r.b,{path:"/write",component:U}),Object(C.jsx)(r.b,{path:"/post/:id",component:Q})]})]})},Z=a(17),$=a(34),ee={token:localStorage.getItem("token"),user:null,isAuth:!1,isLoading:!1,msg:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case b:return Object(V.a)(Object(V.a)({},e),{},{isLoading:!0});case f:case h:return localStorage.removeItem("token"),Object(V.a)(Object(V.a)({},e),{},{token:null,user:null,isAuth:!1,isLoading:!1});case O:case d:return localStorage.setItem("token",n.token),Object(V.a)(Object(V.a)({},e),{},{isLoading:!1,isAuth:!0},n);case m:return Object(V.a)(Object(V.a)({},e),{},{isLoading:!1,isAuth:!0},n);default:return e}},ae={posts:[],loading:!1,post:{},error:null},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case S:case v:case E:return Object(V.a)(Object(V.a)({},e),{},{loading:!0});case w:case T:return Object(V.a)(Object(V.a)({},e),{},{loading:!1,post:n});case k:case y:case _:return Object(V.a)(Object(V.a)({},e),{},{loading:!1,error:n});case N:return Object(V.a)(Object(V.a)({},e),{},{loading:!1,posts:n});case I:return Object(V.a)(Object(V.a)({},e),{},{loading:!1,post:{}});default:return e}},ce=Object(Z.b)({authReducer:te,postReducer:ne}),se=[$.a],re=Object(Z.d)(ce,Object(Z.c)(Z.a.apply(void 0,se),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));a(76);s.a.render(Object(C.jsx)(D.a,{children:Object(C.jsx)(i.a,{store:re,children:Object(C.jsx)(Y,{})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.294acb46.chunk.js.map